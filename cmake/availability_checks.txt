## Local Variables:
## mode: cmake
## End:

# TODO: actually check if all the stuff below is available (it is on a standard
#       GNU/Linux system)
list(APPEND INCLUDE_CHECKS
  "HAVE_DIRENT_H"
  "HAVE_ENDIAN_H"
  "HAVE_INTTYPES_H"
  "HAVE_MALLOC_H"
  "HAVE_NDIR_H"
  "HAVE_NETINET_IN_H"
  "HAVE_NETINET_IP_H"
  "HAVE_NET_ROUTE_H"
  "HAVE_SCHED_H"
  "HAVE_STDARG_H"
  "HAVE_STDINT_H"
  "HAVE_STDLIB_H"
  "HAVE_SYS_DIR_H"
  "HAVE_SYS_MALLOC_H"
  "HAVE_SYS_MOUNT_H"
  "HAVE_SYS_NDIR_H"
  "HAVE_SYS_PARAM_H"
  "HAVE_SYS_RESOURCE_H"
  "HAVE_SYS_SYSMACROS_H"
  "HAVE_SYS_TIME_H"
  "HAVE_SYS_WAIT_H"
  "HAVE_TIME_H"
  "HAVE_UNISTD_H"
  "HAVE_UTIME_H"
  "HAVE_VFS_H"
)
foreach(include_check IN LISTS INCLUDE_CHECKS)
  target_compile_definitions(ntech PRIVATE ${include_check}=1)
endforeach()

# Special handling for CLOCKID_T, see libutils/clockid_t.h.in for details.
set(HAVE_CLOCKID_T_DEFINE "#define HAVE_CLOCKID_T 1")
configure_file(
  "${LIBUTILS_DIR}/clockid_t.h.in"
  "${LIBUTILS_DIR}/clockid_t.h"
  IMMEDIATE @ONLY)


list(APPEND FUNC_DECL_CHECKS
  "HAVE_DECL_ALARM"
  "HAVE_DECL_CHMOD"
  "HAVE_DECL_CHOWN"
  "HAVE_DECL_CLOCK_GETTIME"
  "HAVE_DECL_CLOSEFROM"
  "HAVE_DECL_DIRFD"
  "HAVE_DECL_DRAND48"
  "HAVE_DECL_ENDNETGRENT"
  "HAVE_DECL_FCHMOD"
  "HAVE_DECL_FCHMODAT"
  "HAVE_DECL_FCHOWNAT"
  "HAVE_DECL_FGETGRENT"
  "HAVE_DECL_FSTATAT"
  "HAVE_DECL_FSYNC"
  "HAVE_DECL_GETADDRINFO"
  "HAVE_DECL_GETGID"
  "HAVE_DECL_GETLINE"
  "HAVE_DECL_GETNETGRENT"
  "HAVE_DECL_GETUID"
  "HAVE_DECL_GLOB"
  "HAVE_DECL_GMTIME_R"
  "HAVE_DECL_INET_NTOP"
  "HAVE_DECL_INET_PTON"
  "HAVE_DECL_ISFINITE"
  "HAVE_DECL_LE32TOH"
  "HAVE_DECL_LOCALTIME_R"
  "HAVE_DECL_LOG2"
  "HAVE_DECL_LSTAT"
  "HAVE_DECL_MEMMEM"
  "HAVE_DECL_MEMRCHR"
  "HAVE_DECL_MKDTEMP"
  "HAVE_DECL_NANOSLEEP"
  "HAVE_DECL_OPENAT"
  "HAVE_DECL_PTHREAD_ATTR_SETSTACKSIZE"
  "HAVE_DECL_READLINKAT"
  "HAVE_DECL_REALPATH"
  "HAVE_DECL_ROUND"
  "HAVE_DECL_SETLINEBUF"
  "HAVE_DECL_SETNETGRENT"
  "HAVE_DECL_SLEEP"
  "HAVE_DECL_SOCKETPAIR"
  "HAVE_DECL_SRAND48"
  "HAVE_DECL_STPNCPY"
  "HAVE_DECL_STRCASECMP"
  "HAVE_DECL_STRCASESTR"
  "HAVE_DECL_STRCHRNUL"
  "HAVE_DECL_STRDUP"
  "HAVE_DECL_STRERROR"
  "HAVE_DECL_STRLCAT"
  "HAVE_DECL_STRLCPY"
  "HAVE_DECL_STRNCASECMP"
  "HAVE_DECL_STRNDUP"
  "HAVE_DECL_STRNLEN"
  "HAVE_DECL_STRRSTR"
  "HAVE_DECL_STRSEP"
  "HAVE_DECL_STRSIGNAL"
  "HAVE_DECL_STRSTR"
  "HAVE_DECL_UNAME"
  "HAVE_DECL_UNSETENV"
)
foreach(func_decl_check IN LISTS FUNC_DECL_CHECKS)
  target_compile_definitions(ntech PRIVATE ${func_decl_check}=1)
endforeach()

list(APPEND TYPE_DECL_CHECKS
  "HAVE_SOCKLEN_T"
)
foreach(type_decl_check IN LISTS TYPE_DECL_CHECKS)
  target_compile_definitions(ntech PRIVATE ${type_decl_check}=1)
endforeach()
